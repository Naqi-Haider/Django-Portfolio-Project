{% extends "layout.html" %}

{% block title %}Naqi Haider | Skills{% endblock %}

{% block content %}
<section class="page-section skills-page">
  <div class="skills-container">
    <div class="skills-content">
      <h1 class="section-title">Skills</h1>

      {% if is_admin %}
      <div class="admin-actions">
        <a href="{% url 'add_skill' %}" class="btn-add">+ Add Skill</a>
      </div>
      {% endif %}

      <div class="content-item">
        <h3 class="item-title">Programming Languages</h3>
        <div class="skills-list">
          {% for skill in skills_by_category.programming %}
          <span class="skill-item" data-description="{{ skill.description }}">
            {{ skill.name }}
            {% if is_admin %}<a href="{% url 'edit_skill' skill.pk %}" class="skill-edit">✎</a>{% endif %}
          </span>
          {% empty %}
          <span class="no-skills">No skills yet</span>
          {% endfor %}
        </div>
      </div>

      <div class="content-item">
        <h3 class="item-title">Frameworks & Libraries</h3>
        <div class="skills-list">
          {% for skill in skills_by_category.frameworks %}
          <span class="skill-item" data-description="{{ skill.description }}">
            {{ skill.name }}
            {% if is_admin %}<a href="{% url 'edit_skill' skill.pk %}" class="skill-edit">✎</a>{% endif %}
          </span>
          {% empty %}
          <span class="no-skills">No skills yet</span>
          {% endfor %}
        </div>
      </div>

      <div class="content-item">
        <h3 class="item-title">Tools & Technologies</h3>
        <div class="skills-list">
          {% for skill in skills_by_category.tools %}
          <span class="skill-item" data-description="{{ skill.description }}">
            {{ skill.name }}
            {% if is_admin %}<a href="{% url 'edit_skill' skill.pk %}" class="skill-edit">✎</a>{% endif %}
          </span>
          {% empty %}
          <span class="no-skills">No skills yet</span>
          {% endfor %}
        </div>
      </div>

      <div class="content-item">
        <h3 class="item-title">Soft Skills</h3>
        <div class="skills-list">
          {% for skill in skills_by_category.soft %}
          <span class="skill-item" data-description="{{ skill.description }}">
            {{ skill.name }}
            {% if is_admin %}<a href="{% url 'edit_skill' skill.pk %}" class="skill-edit">✎</a>{% endif %}
          </span>
          {% empty %}
          <span class="no-skills">No skills yet</span>
          {% endfor %}
        </div>
      </div>
    </div>

    <div class="skill-modal hidden" id="skillModal">
      <h3 class="modal-title" id="modalTitle"></h3>
      <p class="modal-description" id="modalDescription"></p>
    </div>
  </div>
</section>

<script>
  document.querySelectorAll('.skill-item').forEach(item => {
    item.addEventListener('click', function (e) {
      if (e.target.classList.contains('skill-edit')) return;

      const skillName = this.textContent.trim().replace('✎', '').trim();
      const description = this.getAttribute('data-description') || 'No description available';

      document.getElementById('modalTitle').textContent = skillName;
      document.getElementById('modalDescription').textContent = description;
      document.getElementById('skillModal').classList.add('active');

      document.querySelectorAll('.skill-item').forEach(s => s.classList.remove('selected'));
      this.classList.add('selected');
    });
  });
</script>
{% endblock %}