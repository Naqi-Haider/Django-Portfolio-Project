{% extends "layout.html" %}

{% block title %}Admin Dashboard | Naqi Haider{% endblock %}

{% block content %}
<section class="page-section">
  <div class="dashboard-header">
    <h1 class="section-title">Admin Dashboard</h1>
    <a href="{% url 'admin_logout' %}" class="btn-logout">Logout</a>
  </div>

  {% if messages %}
  <div class="messages">
    {% for message in messages %}
    <div class="message {{ message.tags }}">{{ message }}</div>
    {% endfor %}
  </div>
  {% endif %}

  <div class="dashboard-grid">
    <!-- Bio Section -->
    <div class="dashboard-card">
      <h2>Bio</h2>
      <p class="card-count">{% if bio %}1{% else %}0{% endif %} entry</p>
      <a href="{% url 'edit_bio' %}" class="btn-action">{% if bio %}Edit{% else %}Create{% endif %} Bio</a>
    </div>

    <!-- Education Section -->
    <div class="dashboard-card">
      <h2>Education</h2>
      <p class="card-count">{{ education_count }} entries</p>
      <a href="{% url 'add_education' %}" class="btn-action">+ Add Education</a>
      {% if education_list %}
      <ul class="item-list">
        {% for edu in education_list %}
        <li>
          <span>{{ edu.degree }}</span>
          <div class="item-btns">
            <a href="{% url 'edit_education' edu.pk %}" class="btn-sm">Edit</a>
            <a href="{% url 'delete_education' edu.pk %}" class="btn-sm btn-danger">Del</a>
          </div>
        </li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>

    <!-- Skills Section -->
    <div class="dashboard-card">
      <h2>Skills</h2>
      <p class="card-count">{{ skills_count }} entries</p>
      <a href="{% url 'add_skill' %}" class="btn-action">+ Add Skill</a>
      {% if skills_list %}
      <ul class="item-list">
        {% for skill in skills_list %}
        <li>
          <span>{{ skill.name }}</span>
          <div class="item-btns">
            <a href="{% url 'edit_skill' skill.pk %}" class="btn-sm">Edit</a>
            <a href="{% url 'delete_skill' skill.pk %}" class="btn-sm btn-danger">Del</a>
          </div>
        </li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>

    <!-- Experience Section -->
    <div class="dashboard-card">
      <h2>Experience</h2>
      <p class="card-count">{{ experience_count }} entries</p>
      <a href="{% url 'add_experience' %}" class="btn-action">+ Add Experience</a>
      {% if experience_list %}
      <ul class="item-list">
        {% for exp in experience_list %}
        <li>
          <span>{{ exp.title }}</span>
          <div class="item-btns">
            <a href="{% url 'edit_experience' exp.pk %}" class="btn-sm">Edit</a>
            <a href="{% url 'delete_experience' exp.pk %}" class="btn-sm btn-danger">Del</a>
          </div>
        </li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>

    <!-- Projects Section -->
    <div class="dashboard-card">
      <h2>Projects</h2>
      <p class="card-count">{{ projects_count }} entries</p>
      <a href="{% url 'add_project' %}" class="btn-action">+ Add Project</a>
      {% if projects_list %}
      <ul class="item-list">
        {% for project in projects_list %}
        <li>
          <span>{{ project.title }}</span>
          <div class="item-btns">
            <a href="{% url 'edit_project' project.pk %}" class="btn-sm">Edit</a>
            <a href="{% url 'delete_project' project.pk %}" class="btn-sm btn-danger">Del</a>
          </div>
        </li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
  </div>
</section>

<style>
  .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .btn-logout {
    padding: 0.5rem 1rem;
    background: #dc3545;
    color: white;
    text-decoration: none;
  }

  .dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .dashboard-card {
    background: #f8f9fa;
    padding: 1.5rem;
    border-left: 4px solid var(--primary-color);
  }

  .dashboard-card h2 {
    margin: 0 0 0.5rem;
    color: var(--primary-color);
  }

  .card-count {
    color: #666;
    margin-bottom: 1rem;
  }

  .btn-action {
    display: inline-block;
    padding: 0.5rem 1rem;
    background: var(--primary-color);
    color: var(--secondary-color);
    text-decoration: none;
    margin-bottom: 1rem;
  }

  .item-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .item-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    border-bottom: 1px solid #ddd;
  }

  .item-btns {
    display: flex;
    gap: 0.5rem;
  }

  .btn-sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.8rem;
    text-decoration: none;
    background: #6c757d;
    color: white;
  }

  .btn-danger {
    background: #dc3545;
  }

  .messages .message {
    padding: 0.75rem;
    margin-bottom: 1rem;
    border-radius: 4px;
  }

  .messages .success {
    background: #d4edda;
    color: #155724;
  }

  .messages .error {
    background: #f8d7da;
    color: #721c24;
  }
</style>
{% endblock %}